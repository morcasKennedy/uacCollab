function show_message(e,r="default",a=5){let t=document.getElementById("toast-example"),s=document.getElementById("title"),n=document.getElementById("content"),o=document.getElementById("icon");var l="",i="";switch(n.innerHTML=e,r){case"success":r="t-bg-success",i="bi-check-circle",l="Success";break;case"info":r="bg-secondary",i="bi-info-circle",l="Information";break;case"error":r="bg-danger",i="bi-x-octagon",l="Error";break;case"warning":r="bg-warning",i="bi-exclamation-triangle",l="Warning";break;default:i="bi-bell",l="Notification"}s.innerHTML=l,t.classList.remove("bg-primary","bg-dark","bg-danger","bg-warning","t-bg-success"),o.classList.remove("bi-check-circle","bi-info-circle","bi-x-octagon","bi-exclamation-triangle","bi-bell"),t.classList.add(r),o.classList.add(i);new bootstrap.Toast(t,{autohide:!0,delay:1e3*a}).show()}async function save(e,r,a=null,t="save"){let s=$(t),n=s.html();try{s.html('<span class="loading"></span>Chargement...').prop("disabled",!0);let o=!1,l=new FormData;Object.keys(e).forEach(r=>{let a=e[r];(a instanceof File||Array.isArray(a)&&a[0]instanceof File)&&(o=!0),Array.isArray(a)?a.forEach((e,a)=>{l.append(`${r}[${a}]`,e)}):l.append(r,a)});let{content:i,status:c}=await $.ajax({url:r,type:"POST",data:o?l:e,dataType:"json",processData:!o,contentType:!o&&"application/x-www-form-urlencoded; charset=UTF-8"});if(s.html(n).prop("disabled",!1),show_message(i,c),"success"===c)return a&&$("#"+a).modal("hide"),!0;return!1}catch(d){return s.html(n).prop("disabled",!1),show_message("Une erreur s'est produite. Veuillez r\xe9essayer : "+d,"error"),console.error("Erreur de connexion :",d),!1}}async function send(e,r,a=null,t="save"){let s=$(t),n=s.html();try{s.html('<span class="loading"></span>Chargement...').prop("disabled",!0);let o=!1,l=new FormData;Object.keys(e).forEach(r=>{let a=e[r];(a instanceof File||Array.isArray(a)&&a[0]instanceof File)&&(o=!0),Array.isArray(a)?a.forEach((e,a)=>{l.append(`${r}[${a}]`,e)}):l.append(r,a)});let{content:i,status:c}=await $.ajax({url:r,type:"POST",data:o?l:e,dataType:"json",processData:!o,contentType:!o&&"application/x-www-form-urlencoded; charset=UTF-8"});if(s.html(n).prop("disabled",!1),"success"!=c&&show_message(i,c),"success"===c)return a&&$("#"+a).modal("hide"),!0;return!1}catch(d){return s.html(n).prop("disabled",!1),show_message("Une erreur s'est produite. Veuillez r\xe9essayer : "+d,"error"),console.error("Erreur de connexion :",d),!1}}async function insert(e,r,a=null,t="save"){let s=$(t),n=s.html();try{s.html('<span class="loading"></span>').prop("disabled",!0);let o=!1,l=new FormData;Object.keys(e).forEach(r=>{let a=e[r];(a instanceof File||Array.isArray(a)&&a[0]instanceof File)&&(o=!0),Array.isArray(a)?a.forEach((e,a)=>{l.append(`${r}[${a}]`,e)}):l.append(r,a)});let{content:i,status:c}=await $.ajax({url:r,type:"POST",data:o?l:e,dataType:"json",processData:!o,contentType:!o&&"application/x-www-form-urlencoded; charset=UTF-8"});if(s.html(n).prop("disabled",!1),"success"!=c&&show_message(i,c),"success"===c)return a&&$("#"+a).modal("hide"),!0;return!1}catch(d){return s.html(n).prop("disabled",!1),show_message("Une erreur s'est produite. Veuillez r\xe9essayer : "+d,"error"),console.error("Erreur de connexion :",d),!1}}function handle_display(e){let{data:r,url:a,container:t,searchQuery:s}=e;$.ajax({url:a,type:"POST",data:r,dataType:"html",success:function(e){$("#"+t).html(e),s&&filter_data("#"+t,s)},error:function(e,r,a){show_message("Une erreur s'est produite, veuillez r\xe9essayer. : "+a,"error")}})}function filter_data(e,r){let a=$(e).find("tr"),t=!1;a.each(function(){let e=$(this),a=!1;e.find("th, td:not([hidden])").each(function(){$(this).text().toLowerCase().includes(r.toLowerCase())&&(a=!0)}),e.toggle(a),a&&(t=!0)}),t||show_message("Aucune donn\xe9e ne correspond \xe0 votre recherche.","warning",15)}function get_value(e){return $("#"+e).val().trim()}function get_controller_url(e){return"./controllers/controller-"+e+".php"}function redirect(e){window.location.href=e}function fill_select(e,r,a){$.ajax({url:e,type:"POST",data:r,success:function(e){$("#"+a).html(e)},error:function(e,r,a){let t=`Erreur lors de la requ\xeate : ${r}, ${a}`;handle.show_message(t,"error")}})}function get_file(e){return document.getElementById(e).files[0]}export{show_message,get_value,redirect,save,get_controller_url,handle_display,fill_select,get_file,send,insert};